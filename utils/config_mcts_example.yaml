# path to the task data directory
data_dir: "./data/nomad2018-predict-transparent-conductors/prepared/public"
dataset_dir: "./data"

# either provide a path to a plaintext file describing the task
desc_file: "./dataset/full_instructions/nomad2018-predict-transparent-conductors/full_instructions.txt"
# or provide the task goal (and optionally evaluation information) as arguments
goal: null
eval: null

log_dir: ./logs
log_level: INFO
workspace_dir: ./workspaces/run

# whether to unzip any archives in the data directory
preprocess_data: True
# whether to copy the data to the workspace directory (otherwise it will be symlinked)
copy_data: False

start_cpu_id: 0
cpu_number: 24

# 对应脚本中的 exp_name
exp_name: "nomad2018-predict-transparent-conductors_mcts_comp_validcheck_[cpu-0-23]" 

# settings for code execution
exec:
  timeout: 7200 # 与 TIME_LIMIT_SECS 保持一致
  agent_file_name: runfile.py
  format_tb_ipython: False

# agent hyperparams
agent:
  # how many improvement iterations to run
  steps: 5 # 对应 STEP_LIMIT
  # total time available to agent
  time_limit: 7200 # 对应脚本中的 format_time 格式
  # whether to instruct the agent to use CV (set to 1 to disable)
  k_fold_validation: 1
  # whether to instruct the agent to generate a prediction function
  expose_prediction: False
  # whether to provide the agent with a preview of the data
  data_preview: True
  # whether to convert system messages into user messages
  convert_system_to_user: False
  # whether to obfuscate that we're doing kaggle
  obfuscate: False
  # check submission format
  check_format: True
  # for mcts
  save_all_submission: True
  steerable_reasoning: False 

  # LLM settings for coding
  code:
    model: "Your Model"
    temp: 0.5
    base_url: "https://api-inference.modelscope.cn/v1/"
    api_key: "Your Keys"

  # LLM settings for evaluating program output / tracebacks
  feedback:
    model: "Your Model"
    temp: 0.5
    base_url: "https://api-inference.modelscope.cn/v1/"
    api_key: "Your Keys"

  # hyperparameters for the tree search
  search:
    back_debug_depth: 3
    max_debug_depth: 20
    debug_prob: 1
    num_drafts: 5
    num_bugs: 1
    num_improves: 3
    invalid_metric_upper_bound: 100
    metric_improvement_threshold: 0.0001
    max_improve_failure: 3
    parallel_search_num: 3
  
  decay:
    decay_type: piecewise       
    exploration_constant: 1.414        
    lower_bound: 0.5                   
    linear_decay:
      alpha: 0.01
    exponential_decay:
      gamma: 0.99
    piecewise_decay:
      alpha: 0.01
      phase_ratios: [0.3, 0.7]
    dynamic_piecewise_decay:
      alpha: 0.01
      phase_ratios: [0.85, 1]

  # 多轮微调配置
  fine_tuning:
    enabled: true                      
    max_turns: 5                       
    improvement_threshold: 0.01        
    early_stopping_patience: 2         
    optuna_trials_per_turn: 1          
    use_hyperparameter_optimization: true  
    task_type: auto                    
    save_fine_tuning_history: true     
    hyperparameter_subsets: []         
    timeout_per_turn: 600